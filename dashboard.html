<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartSched | AI Syllabus Tracker</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        /* --- CSS STYLES --- */
        :root {
            --primary: #4F46E5;
            --secondary: #E0E7FF;
            --dark: #1F2937;
            --light: #F3F4F6;
            --white: #ffffff;
            --success: #10B981;
            --danger: #EF4444;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }

        body { display: flex; height: 100vh; background-color: var(--light); color: var(--dark); }

        /* Sidebar Styles */
        .sidebar { width: 250px; background-color: var(--white); border-right: 1px solid #e5e7eb; display: flex; flex-direction: column; padding: 20px; flex-shrink: 0; }
        .logo { font-size: 1.5rem; font-weight: 700; color: var(--primary); margin-bottom: 40px; display: flex; align-items: center; gap: 10px; }
        .nav-item { padding: 12px 15px; margin-bottom: 10px; border-radius: 8px; cursor: pointer; color: #6B7280; font-weight: 500; transition: all 0.3s; display: flex; align-items: center; gap: 10px; }
        .nav-item:hover, .nav-item.active { background-color: var(--secondary); color: var(--primary); }

        /* Main Content Styles */
        .main-content { flex: 1; padding: 40px; overflow-y: auto; position: relative; }

        /* Header & Logout Layout */
        .top-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 30px; }
        .header h1 { font-size: 1.8rem; margin-bottom: 5px; }
        .header p { color: #6B7280; }
        .logout-btn { background-color: transparent; border: 1px solid #e5e7eb; padding: 8px 16px; border-radius: 6px; color: #6B7280; cursor: pointer; transition: 0.2s; display: flex; align-items: center; gap: 8px; }
        .logout-btn:hover { background-color: #fee2e2; color: var(--danger); border-color: #fca5a5; }

        /* View Sections */
        .view-section { display: none; animation: fadeIn 0.4s ease; }
        .view-section.active { display: block; }

        /* Dashboard Grid Layout */
        .dashboard-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 20px; }
        @media (max-width: 1000px) { .dashboard-grid { grid-template-columns: 1fr; } }

        /* Stats Cards */
        .stats-container { display: flex; gap: 20px; flex-wrap: wrap; }
        .stat-card { background: var(--white); padding: 20px; border-radius: 12px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); flex: 1; min-width: 200px; border-left: 5px solid var(--primary); }

        /* Calendar Styles */
        .calendar-widget { background: var(--white); padding: 20px; border-radius: 12px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .calendar-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; font-weight: 600; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; text-align: center; }
        .cal-day-name { font-size: 0.8rem; color: #9CA3AF; margin-bottom: 5px; }
        .cal-date { padding: 8px; font-size: 0.9rem; border-radius: 50%; cursor: pointer; }
        .cal-date:hover { background-color: var(--light); }
        .cal-date.today { background-color: var(--primary); color: white; }

        /* Upload Area Styles */
        .upload-zone { border: 2px dashed #9CA3AF; border-radius: 12px; padding: 50px; text-align: center; background-color: var(--white); transition: 0.3s; cursor: pointer; }
        .upload-zone:hover { border-color: var(--primary); background-color: #F9FAFB; }
        .upload-icon { font-size: 3rem; color: #9CA3AF; margin-bottom: 15px; }
        .btn-primary { background-color: var(--primary); color: white; border: none; padding: 12px 24px; border-radius: 8px; font-size: 1rem; cursor: pointer; margin-top: 20px; transition: 0.2s; }
        .btn-primary:hover { background-color: #4338ca; }

        /* Schedule/Cards Styles */
        .schedule-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin-top: 20px; }
        .task-card { background: var(--white); padding: 20px; border-radius: 12px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); border-left: 5px solid var(--primary); position: relative; overflow: hidden; transition: transform 0.2s; }
        .task-card:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .task-card.urgent { border-left-color: #EF4444; }
        .task-card.medium { border-left-color: #F59E0B; }
        .task-title { font-weight: 600; font-size: 1.1rem; margin-bottom: 5px; }
        .task-subject { color: #6B7280; font-size: 0.9rem; margin-bottom: 15px; }
        .task-date { font-size: 0.85rem; color: #4F46E5; font-weight: 600; display: flex; align-items: center; gap: 5px; }

        /* Hover Overlay */
        .task-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(31, 41, 55, 0.95); color: white; display: flex; flex-direction: column; justify-content: center; align-items: center; opacity: 0; transition: opacity 0.3s ease; padding: 20px; text-align: center; }
        .task-card:hover .task-overlay { opacity: 1; }
        .overlay-desc { font-size: 0.9rem; margin-bottom: 15px; color: #D1D5DB; }
        .btn-finish { background-color: var(--success); color: white; border: none; padding: 8px 16px; border-radius: 20px; cursor: pointer; font-weight: 600; font-size: 0.9rem; display: flex; align-items: center; gap: 5px; transition: 0.2s; }
        .btn-finish:hover { background-color: #059669; transform: scale(1.05); }

        /* Loader Animation */
        .loader-container { display: none; text-align: center; margin-top: 50px; }
        .spinner { border: 4px solid #f3f3f3; border-top: 4px solid var(--primary); border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto 15px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Empty State Message */
        .empty-msg { text-align: center; color: #9CA3AF; margin-top: 40px; font-style: italic; width: 100%; grid-column: 1 / -1; }
    </style>
</head>
<body onload="initDashboard()">

    <div class="sidebar">
        <div class="logo">
            <i class="fa-solid fa-graduation-cap"></i> SmartSched
        </div>
        <div class="nav-item active" onclick="switchTab('dashboard')">
            <i class="fa-solid fa-chart-pie"></i> Dashboard
        </div>
        <div class="nav-item" onclick="switchTab('upload')">
            <i class="fa-solid fa-file-upload"></i> Upload Syllabus
        </div>
        <div class="nav-item" onclick="switchTab('schedule')">
            <i class="fa-solid fa-calendar-days"></i> My Schedule
        </div>
    </div>

    <div class="main-content">
        
        <div class="top-header">
            <div class="header">
                <h1>Hello, Student! ðŸ‘‹</h1>
                <p>Here is your academic overview for the week.</p>
            </div>
            <button class="logout-btn" onclick="handleLogout()">
                <i class="fa-solid fa-right-from-bracket"></i> Logout
            </button>
        </div>
        
        <div id="dashboard" class="view-section active">
            <div class="dashboard-grid">
                <div class="stats-container">
                    <div class="stat-card" style="border-left-color: var(--success);">
                        <h3>Tasks Completed</h3>
                        <h1 id="completedCount" style="font-size: 2.5rem; margin: 10px 0;">0</h1>
                        <p style="color: #6B7280;">Keep up the streak!</p>
                    </div>
                    <div class="stat-card" style="border-left-color: #F59E0B;">
                        <h3>Upcoming Deadlines</h3>
                        <h1 id="deadlineCount" style="font-size: 2.5rem; margin: 10px 0;">0</h1>
                        <p style="color: #6B7280;">Awaiting uploads...</p>
                    </div>
                </div>

                <div class="calendar-widget">
                    <div class="calendar-header">
                        <span id="currentMonthYear">October 2025</span>
                        <i class="fa-solid fa-calendar" style="color: var(--primary);"></i>
                    </div>
                    <div class="calendar-grid" id="calendarGrid">
                        </div>
                </div>
            </div>
        </div>

        <div id="upload" class="view-section">
            <div class="header">
                <h2>Upload Syllabus</h2>
            </div>
            <div class="upload-zone" onclick="triggerFileInput()">
                <i class="fa-solid fa-cloud-arrow-up upload-icon"></i>
                <h3>Drag & Drop your Syllabus here</h3>
                <p style="color: #9CA3AF; margin-top: 10px;">or click to browse files</p>
                <input type="file" id="fileInput" style="display: none;" onchange="handleFileSelect()">
            </div>

            <div class="loader-container" id="aiLoader">
                <div class="spinner"></div>
                <h3>Analyzing Syllabus with AI...</h3>
                <p>Extracting dates, topics, and assignments.</p>
            </div>

            <button class="btn-primary" id="processBtn" style="display: none;" onclick="processSyllabus()">
                Generate Study Plan
            </button>
        </div>

        <div id="schedule" class="view-section">
            <div class="header">
                <h2>Your Study Plan</h2>
            </div>

            <div class="schedule-grid" id="taskList">
                <p class="empty-msg" id="emptyStateMsg">No tasks found. Please upload a syllabus first.</p>
            </div>
        </div>

    </div>

    <script>
        // --- INITIALIZATION ---
        function initDashboard() {
            generateCalendar();
        }

        // --- 1. LOGOUT LOGIC ---
        function handleLogout() {
            if(confirm("Are you sure you want to log out?")) {
                window.location.href = 'index.html';
            }
        }

        // --- 2. CALENDAR LOGIC ---
        function generateCalendar() {
            const grid = document.getElementById('calendarGrid');
            const monthLabel = document.getElementById('currentMonthYear');
            
            const date = new Date(); 
            const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
            
            monthLabel.innerText = `${monthNames[date.getMonth()]} ${date.getFullYear()}`;

            const days = ['S', 'M', 'T', 'W', 'T', 'F', 'S'];
            days.forEach(day => {
                grid.innerHTML += `<div class="cal-day-name">${day}</div>`;
            });

            const firstDay = new Date(date.getFullYear(), date.getMonth(), 1).getDay();
            const daysInMonth = new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();
            const today = date.getDate();

            for(let i=0; i<firstDay; i++) {
                grid.innerHTML += `<div></div>`;
            }

            for(let i=1; i<=daysInMonth; i++) {
                let className = "cal-date";
                if(i === today) className += " today";
                grid.innerHTML += `<div class="${className}">${i}</div>`;
            }
        }

        // --- 3. MARK DONE LOGIC ---
        function markAsDone(taskId) {
            const taskElement = document.getElementById(taskId);
            taskElement.style.transform = "scale(0.9)";
            taskElement.style.opacity = "0";
            
            setTimeout(() => {
                taskElement.remove();
                
                // Update Completed Counter
                const countElement = document.getElementById('completedCount');
                let currentCount = parseInt(countElement.innerText);
                countElement.innerText = currentCount + 1;
                
                // Decrease Deadline Counter
                const deadlineElement = document.getElementById('deadlineCount');
                let deadlineCount = parseInt(deadlineElement.innerText);
                if(deadlineCount > 0) deadlineElement.innerText = deadlineCount - 1;

                // Check if list is empty
                const taskList = document.getElementById('taskList');
                if(taskList.children.length === 0) {
                     taskList.innerHTML = '<p class="empty-msg" id="emptyStateMsg">No tasks found. Please upload a syllabus first.</p>';
                }

                alert("Great job! Task marked as completed.");
            }, 300);
        }

        // --- 4. NAVIGATION LOGIC ---
        function switchTab(tabId) {
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            event.currentTarget.classList.add('active');
            document.querySelectorAll('.view-section').forEach(section => section.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
        }

        // --- 5. UPLOAD LOGIC ---
        function triggerFileInput() { document.getElementById('fileInput').click(); }

        function handleFileSelect() {
            const fileInput = document.getElementById('fileInput');
            if(fileInput.files.length > 0) {
                document.querySelector('.upload-zone h3').innerText = "File: " + fileInput.files[0].name;
                document.getElementById('processBtn').style.display = "inline-block";
            }
        }

        function processSyllabus() {
            document.querySelector('.upload-zone').style.display = 'none';
            document.getElementById('processBtn').style.display = 'none';
            document.getElementById('aiLoader').style.display = 'block';

            setTimeout(() => {
                document.getElementById('aiLoader').style.display = 'none';
                addMockTasks();
                switchTab('schedule');
                setTimeout(() => {
                    document.querySelector('.upload-zone').style.display = 'block';
                    document.querySelector('.upload-zone h3').innerText = "Drag & Drop your Syllabus here";
                    document.querySelector('.upload-zone h3').innerText = "Drag & Drop your Syllabus here";
                }, 1000);
            }, 3000);
        }

        function addMockTasks() {
            const taskList = document.getElementById('taskList');
            
            // Remove empty state message if it exists
            const emptyMsg = document.getElementById('emptyStateMsg');
            if(emptyMsg) emptyMsg.remove();
            
            // Mock Data
            const newTasks = [
                { title: "Research Paper Draft", subject: "Software Engineering", date: "Oct 22, 2025", type: "medium", desc: "Submit PDF draft to instructor." },
                { title: "Calculus Midterm", subject: "Mathematics", date: "Oct 25, 2025", type: "urgent", desc: "Coverage: Chapter 1-5." }
            ];

            // Update Upcoming Deadlines Counter
            const deadlineElement = document.getElementById('deadlineCount');
            let currentDeadlines = parseInt(deadlineElement.innerText);
            deadlineElement.innerText = currentDeadlines + newTasks.length;

            newTasks.forEach(task => {
                const newId = 'task-' + Math.floor(Math.random() * 10000);
                const taskHTML = `
                <div class="task-card ${task.type}" id="${newId}">
                    <div class="task-title">${task.title}</div>
                    <div class="task-subject">${task.subject}</div>
                    <div class="task-date"><i class="fa-regular fa-clock"></i> ${task.date}</div>
                    <div class="task-overlay">
                        <p class="overlay-desc">${task.desc}</p>
                        <button class="btn-finish" onclick="markAsDone('${newId}')">
                            <i class="fa-solid fa-check"></i> Finished
                        </button>
                    </div>
                </div>
                `;
                taskList.insertAdjacentHTML('beforeend', taskHTML);
            });
        }
    </script>
</body>
</html>